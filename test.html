<!DOCTYPE html>
<html>
<head>
  <title>Vector Line Drawing</title>
</head>
<body>
  <canvas id="canvas" width="800" height="600"></canvas>
  <button id="saveButton">Save Lines</button>
  <script>
    const canvas = document.getElementById("canvas");
    const ctx = canvas.getContext("2d");
    const saveButton = document.getElementById("saveButton");

    const lines = [];

    let isDrawing = false;
    let startPoint = [];
    
    canvas.addEventListener("mousedown", (event) => {
      isDrawing = true;
      startPoint = [event.offsetX, event.offsetY];
    });

    canvas.addEventListener("mousemove", (event) => {
      if (!isDrawing) return;

      const endPoint = [event.offsetX, event.offsetY];

      ctx.clearRect(0, 0, canvas.width, canvas.height);
      drawLines();

      ctx.beginPath();
      ctx.moveTo(startPoint[0], startPoint[1]);
      ctx.lineTo(endPoint[0], endPoint[1]);
      ctx.stroke();
    });

    canvas.addEventListener("mouseup", () => {
      if (!isDrawing) return;

      const endPoint = [event.offsetX, event.offsetY];
      lines.push([
        normalizePoint(startPoint),
        normalizePoint(endPoint)
      ]);

      isDrawing = false;
      startPoint = [];

      ctx.clearRect(0, 0, canvas.width, canvas.height);
      drawLines();
    });

    saveButton.addEventListener("click", () => {
      console.log(lines);
    });

    function normalizePoint(point) {
      const normalizedX = (point[0] / canvas.width) * 2 - 1;
      const normalizedY = (point[1] / canvas.height) * 2 - 1;
      return [normalizedX, normalizedY];
    }

    function drawLines() {
      for (const line of lines) {
        const [start, end] = line;
        const startX = (start[0] + 1) * (canvas.width / 2);
        const startY = (start[1] + 1) * (canvas.height / 2);
        const endX = (end[0] + 1) * (canvas.width / 2);
        const endY = (end[1] + 1) * (canvas.height / 2);
        
        ctx.beginPath();
        ctx.moveTo(startX, startY);
        ctx.lineTo(endX, endY);
        ctx.stroke();
      }
    }
  </script>
</body>
</html>
